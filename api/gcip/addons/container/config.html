<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>gcip.addons.container.config API documentation</title>
<meta name="description" content="This module represents a Docker client configuration …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>gcip.addons.container.config</code></h1>
</header>
<section id="section-intro">
<p>This module represents a Docker client configuration.</p>
<p>Example:</p>
<pre><code>from gcip.addons.container.config import DockerClientConfig

cfg = DockerClientConfig()
cfg.add_cred_helper(&quot;1234567890.dkr.ecr.us-east-1.amazonaws.com&quot;, &quot;ecr-login&quot;)
cfg.render()
</code></pre>
<p>This will render a Client configuration and dumps it as a json string.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;This module represents a Docker client configuration.

Example:

```
from gcip.addons.container.config import DockerClientConfig

cfg = DockerClientConfig()
cfg.add_cred_helper(&#34;1234567890.dkr.ecr.us-east-1.amazonaws.com&#34;, &#34;ecr-login&#34;)
cfg.render()
```

This will render a Client configuration and dumps it as a json string.
&#34;&#34;&#34;
import json
from typing import Any, Dict

DockerConfig = Dict[str, Any]


class DockerClientConfig():
    def __init__(self, config_file_path: str = &#34;$HOME/.docker/&#34;, config_file_name: str = &#34;config.json&#34;) -&gt; None:
        &#34;&#34;&#34;
        Class which represents a docker client configuration.

        After creating an instance of this class you can add new credential helper or
        basic authentication settings. Or set a default credential store.
        The constructor has a limited feature set. If you change either `config_file_path` or `config_file_name`,
        you should consider using `docker --config` to specify the path to the configuration file.

        Args:
            config_file_path (str): Filesystem path where to create the docker client directory. Defaults to $HOME/.docker/.
            config_file_name (str): Docker client configuration filename. Defaults to config.json.
        &#34;&#34;&#34;
        self._config_file_path = config_file_path
        self._config_file_name = config_file_name
        self.config: DockerConfig = {}

    def set_creds_store(self, creds_store: str) -&gt; None:
        &#34;&#34;&#34;
        Sets the `credsStore` setting for clients.
        See [docker login#credentials-store](https://docs.docker.com/engine/reference/commandline/login/#credentials-store)

        Be aware, that if you set the `credsStore` and add creds_helper or
        username and password authentication, those authentication methods
        are not used.

        Clients which can authenticate against a registry can handle the credential
        store itself, mostly you do not want to set the `credsStore`.
        Use `credsHelpers` instead.

        Args:
            creds_store (str): Should be the suffix of the program to use
            (i.e. everything after docker-credential-).
            For example `osxkeychain`, to use docker-credential-osxkeychain or
            `ecr-login`, to use docker-crendential-ecr-login
        &#34;&#34;&#34;
        self.config[&#34;credsStore&#34;] = creds_store

    def add_cred_helper(self, registry: str, cred_helper: str) -&gt; None:
        &#34;&#34;&#34;
        Adds a Credentials helper `credHelpers` for a registry.
        See [docker login#credential-helpers](https://docs.docker.com/engine/reference/commandline/login/#credential-helpers)

        Args:
            registry (str): Name of the container registry to set `creds_helper` for.
            cred_helper (str): Name of the credential helper to use together with the `registry`.
        &#34;&#34;&#34;
        compose = {
            registry: cred_helper
        }
        if &#34;credsHelpers&#34; not in self.config.keys():
            self.config[&#34;credHelpers&#34;] = compose
        else:
            self.config[&#34;credHelpers&#34;].update(compose)

    def add_auth(
        self,
        registry: str,
        username_env_var: str = &#34;REGISTRY_USERNAME&#34;,
        password_env_var: str = &#34;REGISTRY_PASSWORD&#34;,
    ) -&gt; None:
        &#34;&#34;&#34;
        Adds basic authentication `auths` setting to the configuration.

        This method acts a little special, because of some security aspects.
        The method, takse three arguments, `registry`, `username_env_var` and `password_env_var`.
        Arguments ending wit *_env_var, are ment to be available as a `gcip.Job` variable.

        Args:
            registry (str): Name of the container registry to set `creds_helper` for.
            username_env_var (str): Name of the environment variable which as the registry username stored. Defaults to REGISTRY_USERNAME.
            password_env_var (str): Name of the environment variable which as the registry password stored. Defaults to REGISTRY_PASSWORD.
        &#34;&#34;&#34;
        compose = {
            registry: {
                &#34;username&#34;: &#34;$&#34; + username_env_var,
                &#34;password&#34;: &#34;$&#34; + password_env_var
            }
        }

        if &#34;auths&#34; not in self.config.keys():
            self.config[&#34;auths&#34;] = compose
        else:
            self.config[&#34;auths&#34;].update(compose)

    def add_raw(self, raw_input: Dict[Any, Any]) -&gt; None:
        &#34;&#34;&#34;
        Adds arbitrary settings to configuration.

        Be aware and warned! You can overwrite any predefined settings with this method.
        This method is intendet to be used, if non suitable method is available and you
        have to set a configuration setting.

        Args:
            raw_input (Dict[Any, Any]): Dictionary of non-available settings to be set.
        &#34;&#34;&#34;
        self.config.update(raw_input)

    def get_shell_command(self) -&gt; str:
        &#34;&#34;&#34;
        Renders the shell command for creating the docker client config.

        The render method uses `json.dumps()` to dump the configuration as a json string and escapes it for the shell.
        In Jobs which needed the configuration the renderd output should be redirected to the appropriate
        destinatino e.g. ~/.docker/config.json. This ensures, that environment variables are substituted.

        Returns:
            str: Docker client configuration as a JSON string.
        &#34;&#34;&#34;
        script = [
            f&#34;mkdir -p {self._config_file_path}&#34;,
            &#34;echo &#34; + &#39;&#34;&#39; + json.dumps(self.config).replace(&#39;&#34;&#39;, &#39;\\&#34;&#39;) + &#39;&#34;&#39; + f&#34; &gt; {self._config_file_path}{self._config_file_name}&#34;,
        ]
        return script</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="gcip.addons.container.config.DockerClientConfig"><code class="flex name class">
<span>class <span class="ident">DockerClientConfig</span></span>
<span>(</span><span>config_file_path: str = '$HOME/.docker/', config_file_name: str = 'config.json')</span>
</code></dt>
<dd>
<div class="desc"><p>Class which represents a docker client configuration.</p>
<p>After creating an instance of this class you can add new credential helper or
basic authentication settings. Or set a default credential store.
The constructor has a limited feature set. If you change either <code>config_file_path</code> or <code>config_file_name</code>,
you should consider using <code>docker --config</code> to specify the path to the configuration file.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>config_file_path</code></strong> :&ensp;<code>str</code></dt>
<dd>Filesystem path where to create the docker client directory. Defaults to $HOME/.docker/.</dd>
<dt><strong><code>config_file_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Docker client configuration filename. Defaults to config.json.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DockerClientConfig():
    def __init__(self, config_file_path: str = &#34;$HOME/.docker/&#34;, config_file_name: str = &#34;config.json&#34;) -&gt; None:
        &#34;&#34;&#34;
        Class which represents a docker client configuration.

        After creating an instance of this class you can add new credential helper or
        basic authentication settings. Or set a default credential store.
        The constructor has a limited feature set. If you change either `config_file_path` or `config_file_name`,
        you should consider using `docker --config` to specify the path to the configuration file.

        Args:
            config_file_path (str): Filesystem path where to create the docker client directory. Defaults to $HOME/.docker/.
            config_file_name (str): Docker client configuration filename. Defaults to config.json.
        &#34;&#34;&#34;
        self._config_file_path = config_file_path
        self._config_file_name = config_file_name
        self.config: DockerConfig = {}

    def set_creds_store(self, creds_store: str) -&gt; None:
        &#34;&#34;&#34;
        Sets the `credsStore` setting for clients.
        See [docker login#credentials-store](https://docs.docker.com/engine/reference/commandline/login/#credentials-store)

        Be aware, that if you set the `credsStore` and add creds_helper or
        username and password authentication, those authentication methods
        are not used.

        Clients which can authenticate against a registry can handle the credential
        store itself, mostly you do not want to set the `credsStore`.
        Use `credsHelpers` instead.

        Args:
            creds_store (str): Should be the suffix of the program to use
            (i.e. everything after docker-credential-).
            For example `osxkeychain`, to use docker-credential-osxkeychain or
            `ecr-login`, to use docker-crendential-ecr-login
        &#34;&#34;&#34;
        self.config[&#34;credsStore&#34;] = creds_store

    def add_cred_helper(self, registry: str, cred_helper: str) -&gt; None:
        &#34;&#34;&#34;
        Adds a Credentials helper `credHelpers` for a registry.
        See [docker login#credential-helpers](https://docs.docker.com/engine/reference/commandline/login/#credential-helpers)

        Args:
            registry (str): Name of the container registry to set `creds_helper` for.
            cred_helper (str): Name of the credential helper to use together with the `registry`.
        &#34;&#34;&#34;
        compose = {
            registry: cred_helper
        }
        if &#34;credsHelpers&#34; not in self.config.keys():
            self.config[&#34;credHelpers&#34;] = compose
        else:
            self.config[&#34;credHelpers&#34;].update(compose)

    def add_auth(
        self,
        registry: str,
        username_env_var: str = &#34;REGISTRY_USERNAME&#34;,
        password_env_var: str = &#34;REGISTRY_PASSWORD&#34;,
    ) -&gt; None:
        &#34;&#34;&#34;
        Adds basic authentication `auths` setting to the configuration.

        This method acts a little special, because of some security aspects.
        The method, takse three arguments, `registry`, `username_env_var` and `password_env_var`.
        Arguments ending wit *_env_var, are ment to be available as a `gcip.Job` variable.

        Args:
            registry (str): Name of the container registry to set `creds_helper` for.
            username_env_var (str): Name of the environment variable which as the registry username stored. Defaults to REGISTRY_USERNAME.
            password_env_var (str): Name of the environment variable which as the registry password stored. Defaults to REGISTRY_PASSWORD.
        &#34;&#34;&#34;
        compose = {
            registry: {
                &#34;username&#34;: &#34;$&#34; + username_env_var,
                &#34;password&#34;: &#34;$&#34; + password_env_var
            }
        }

        if &#34;auths&#34; not in self.config.keys():
            self.config[&#34;auths&#34;] = compose
        else:
            self.config[&#34;auths&#34;].update(compose)

    def add_raw(self, raw_input: Dict[Any, Any]) -&gt; None:
        &#34;&#34;&#34;
        Adds arbitrary settings to configuration.

        Be aware and warned! You can overwrite any predefined settings with this method.
        This method is intendet to be used, if non suitable method is available and you
        have to set a configuration setting.

        Args:
            raw_input (Dict[Any, Any]): Dictionary of non-available settings to be set.
        &#34;&#34;&#34;
        self.config.update(raw_input)

    def get_shell_command(self) -&gt; str:
        &#34;&#34;&#34;
        Renders the shell command for creating the docker client config.

        The render method uses `json.dumps()` to dump the configuration as a json string and escapes it for the shell.
        In Jobs which needed the configuration the renderd output should be redirected to the appropriate
        destinatino e.g. ~/.docker/config.json. This ensures, that environment variables are substituted.

        Returns:
            str: Docker client configuration as a JSON string.
        &#34;&#34;&#34;
        script = [
            f&#34;mkdir -p {self._config_file_path}&#34;,
            &#34;echo &#34; + &#39;&#34;&#39; + json.dumps(self.config).replace(&#39;&#34;&#39;, &#39;\\&#34;&#39;) + &#39;&#34;&#39; + f&#34; &gt; {self._config_file_path}{self._config_file_name}&#34;,
        ]
        return script</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="gcip.addons.container.config.DockerClientConfig.add_auth"><code class="name flex">
<span>def <span class="ident">add_auth</span></span>(<span>self, registry: str, username_env_var: str = 'REGISTRY_USERNAME', password_env_var: str = 'REGISTRY_PASSWORD') ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Adds basic authentication <code>auths</code> setting to the configuration.</p>
<p>This method acts a little special, because of some security aspects.
The method, takse three arguments, <code>registry</code>, <code>username_env_var</code> and <code>password_env_var</code>.
Arguments ending wit *_env_var, are ment to be available as a <code>gcip.Job</code> variable.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>registry</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the container registry to set <code>creds_helper</code> for.</dd>
<dt><strong><code>username_env_var</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the environment variable which as the registry username stored. Defaults to REGISTRY_USERNAME.</dd>
<dt><strong><code>password_env_var</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the environment variable which as the registry password stored. Defaults to REGISTRY_PASSWORD.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_auth(
    self,
    registry: str,
    username_env_var: str = &#34;REGISTRY_USERNAME&#34;,
    password_env_var: str = &#34;REGISTRY_PASSWORD&#34;,
) -&gt; None:
    &#34;&#34;&#34;
    Adds basic authentication `auths` setting to the configuration.

    This method acts a little special, because of some security aspects.
    The method, takse three arguments, `registry`, `username_env_var` and `password_env_var`.
    Arguments ending wit *_env_var, are ment to be available as a `gcip.Job` variable.

    Args:
        registry (str): Name of the container registry to set `creds_helper` for.
        username_env_var (str): Name of the environment variable which as the registry username stored. Defaults to REGISTRY_USERNAME.
        password_env_var (str): Name of the environment variable which as the registry password stored. Defaults to REGISTRY_PASSWORD.
    &#34;&#34;&#34;
    compose = {
        registry: {
            &#34;username&#34;: &#34;$&#34; + username_env_var,
            &#34;password&#34;: &#34;$&#34; + password_env_var
        }
    }

    if &#34;auths&#34; not in self.config.keys():
        self.config[&#34;auths&#34;] = compose
    else:
        self.config[&#34;auths&#34;].update(compose)</code></pre>
</details>
</dd>
<dt id="gcip.addons.container.config.DockerClientConfig.add_cred_helper"><code class="name flex">
<span>def <span class="ident">add_cred_helper</span></span>(<span>self, registry: str, cred_helper: str) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a Credentials helper <code>credHelpers</code> for a registry.
See <a href="https://docs.docker.com/engine/reference/commandline/login/#credential-helpers">docker login#credential-helpers</a></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>registry</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the container registry to set <code>creds_helper</code> for.</dd>
<dt><strong><code>cred_helper</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the credential helper to use together with the <code>registry</code>.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_cred_helper(self, registry: str, cred_helper: str) -&gt; None:
    &#34;&#34;&#34;
    Adds a Credentials helper `credHelpers` for a registry.
    See [docker login#credential-helpers](https://docs.docker.com/engine/reference/commandline/login/#credential-helpers)

    Args:
        registry (str): Name of the container registry to set `creds_helper` for.
        cred_helper (str): Name of the credential helper to use together with the `registry`.
    &#34;&#34;&#34;
    compose = {
        registry: cred_helper
    }
    if &#34;credsHelpers&#34; not in self.config.keys():
        self.config[&#34;credHelpers&#34;] = compose
    else:
        self.config[&#34;credHelpers&#34;].update(compose)</code></pre>
</details>
</dd>
<dt id="gcip.addons.container.config.DockerClientConfig.add_raw"><code class="name flex">
<span>def <span class="ident">add_raw</span></span>(<span>self, raw_input: Dict[Any, Any]) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Adds arbitrary settings to configuration.</p>
<p>Be aware and warned! You can overwrite any predefined settings with this method.
This method is intendet to be used, if non suitable method is available and you
have to set a configuration setting.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>raw_input</code></strong> :&ensp;<code>Dict[Any, Any]</code></dt>
<dd>Dictionary of non-available settings to be set.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_raw(self, raw_input: Dict[Any, Any]) -&gt; None:
    &#34;&#34;&#34;
    Adds arbitrary settings to configuration.

    Be aware and warned! You can overwrite any predefined settings with this method.
    This method is intendet to be used, if non suitable method is available and you
    have to set a configuration setting.

    Args:
        raw_input (Dict[Any, Any]): Dictionary of non-available settings to be set.
    &#34;&#34;&#34;
    self.config.update(raw_input)</code></pre>
</details>
</dd>
<dt id="gcip.addons.container.config.DockerClientConfig.get_shell_command"><code class="name flex">
<span>def <span class="ident">get_shell_command</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Renders the shell command for creating the docker client config.</p>
<p>The render method uses <code>json.dumps()</code> to dump the configuration as a json string and escapes it for the shell.
In Jobs which needed the configuration the renderd output should be redirected to the appropriate
destinatino e.g. ~/.docker/config.json. This ensures, that environment variables are substituted.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Docker client configuration as a JSON string.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_shell_command(self) -&gt; str:
    &#34;&#34;&#34;
    Renders the shell command for creating the docker client config.

    The render method uses `json.dumps()` to dump the configuration as a json string and escapes it for the shell.
    In Jobs which needed the configuration the renderd output should be redirected to the appropriate
    destinatino e.g. ~/.docker/config.json. This ensures, that environment variables are substituted.

    Returns:
        str: Docker client configuration as a JSON string.
    &#34;&#34;&#34;
    script = [
        f&#34;mkdir -p {self._config_file_path}&#34;,
        &#34;echo &#34; + &#39;&#34;&#39; + json.dumps(self.config).replace(&#39;&#34;&#39;, &#39;\\&#34;&#39;) + &#39;&#34;&#39; + f&#34; &gt; {self._config_file_path}{self._config_file_name}&#34;,
    ]
    return script</code></pre>
</details>
</dd>
<dt id="gcip.addons.container.config.DockerClientConfig.set_creds_store"><code class="name flex">
<span>def <span class="ident">set_creds_store</span></span>(<span>self, creds_store: str) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the <code>credsStore</code> setting for clients.
See <a href="https://docs.docker.com/engine/reference/commandline/login/#credentials-store">docker login#credentials-store</a></p>
<p>Be aware, that if you set the <code>credsStore</code> and add creds_helper or
username and password authentication, those authentication methods
are not used.</p>
<p>Clients which can authenticate against a registry can handle the credential
store itself, mostly you do not want to set the <code>credsStore</code>.
Use <code>credsHelpers</code> instead.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>creds_store</code></strong> :&ensp;<code>str</code></dt>
<dd>Should be the suffix of the program to use</dd>
</dl>
<p>(i.e. everything after docker-credential-).
For example <code>osxkeychain</code>, to use docker-credential-osxkeychain or
<code>ecr-login</code>, to use docker-crendential-ecr-login</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_creds_store(self, creds_store: str) -&gt; None:
    &#34;&#34;&#34;
    Sets the `credsStore` setting for clients.
    See [docker login#credentials-store](https://docs.docker.com/engine/reference/commandline/login/#credentials-store)

    Be aware, that if you set the `credsStore` and add creds_helper or
    username and password authentication, those authentication methods
    are not used.

    Clients which can authenticate against a registry can handle the credential
    store itself, mostly you do not want to set the `credsStore`.
    Use `credsHelpers` instead.

    Args:
        creds_store (str): Should be the suffix of the program to use
        (i.e. everything after docker-credential-).
        For example `osxkeychain`, to use docker-credential-osxkeychain or
        `ecr-login`, to use docker-crendential-ecr-login
    &#34;&#34;&#34;
    self.config[&#34;credsStore&#34;] = creds_store</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="gcip.addons.container" href="index.html">gcip.addons.container</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="gcip.addons.container.config.DockerClientConfig" href="#gcip.addons.container.config.DockerClientConfig">DockerClientConfig</a></code></h4>
<ul class="">
<li><code><a title="gcip.addons.container.config.DockerClientConfig.add_auth" href="#gcip.addons.container.config.DockerClientConfig.add_auth">add_auth</a></code></li>
<li><code><a title="gcip.addons.container.config.DockerClientConfig.add_cred_helper" href="#gcip.addons.container.config.DockerClientConfig.add_cred_helper">add_cred_helper</a></code></li>
<li><code><a title="gcip.addons.container.config.DockerClientConfig.add_raw" href="#gcip.addons.container.config.DockerClientConfig.add_raw">add_raw</a></code></li>
<li><code><a title="gcip.addons.container.config.DockerClientConfig.get_shell_command" href="#gcip.addons.container.config.DockerClientConfig.get_shell_command">get_shell_command</a></code></li>
<li><code><a title="gcip.addons.container.config.DockerClientConfig.set_creds_store" href="#gcip.addons.container.config.DockerClientConfig.set_creds_store">set_creds_store</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>